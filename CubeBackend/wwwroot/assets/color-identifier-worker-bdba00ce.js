(function(){"use strict";function g(t){if(t==null||t==null)throw new Error("Value is not defined")}function f(t){return g(t),t}let s,l=0,r=0,o=0,m;function w(t){const n=new Array(l*3);for(let e=0;e<l;e++)n[e*3]=t[e*4],n[e*3+1]=t[e*4+1],n[e*3+2]=t[e*4+2];fetch("http://localhost:5208/Cube/IdentifyColors",{method:"POST",body:JSON.stringify({pixels:n,width:r,height:o}),mode:"cors",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>{e.json().then(async i=>{const d=i.resultWidth*i.resultHeight;if(s.drawImage(await createImageBitmap(m),0,0),d>0){const h=i.pixels,c=new Uint8ClampedArray(d*4);for(let a=0;a<d;a++)c[a*4]=h[a*3+2],c[a*4+1]=h[a*3+1],c[a*4+2]=h[a*3],c[a*4+3]=255;s.drawImage(await createImageBitmap(new ImageData(c,i.resultWidth,i.resultHeight)),0,0)}postMessage(i.colors)})})}self.addEventListener("message",t=>{const n=t.data;if(n.constructor===Uint8ClampedArray)w(n);else{const e=n;s=f(e.resultCanvas.getContext("2d",{willReadFrequently:!0})),r=e.width,o=e.height,l=r*o,s.canvas.width=r,s.canvas.height=o,m=new ImageData(new Uint8ClampedArray(l*4).map(i=>255),r,o)}})})();
